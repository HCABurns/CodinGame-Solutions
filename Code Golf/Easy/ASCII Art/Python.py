I=input
l=int(I())
I()
t=I().upper()
while r:=I():
 for c in t:j=ord(c)-65;j=[j,26][j<0]*l;print(end=r[j:j+l])
 print()
